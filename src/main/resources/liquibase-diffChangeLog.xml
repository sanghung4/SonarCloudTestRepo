<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">
    <changeSet author="timothywaite (generated)" id="1632174486867-1">
        <addPrimaryKey columnNames="role_id, permission_id" tableName="role_permissions"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-2">
        <createIndex indexName="IX_null" tableName="users_billto_accounts" unique="true">
            <column name="user_id"/>
            <column name="account_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-3">
        <addForeignKeyConstraint baseColumnNames="role_id" baseTableName="users" constraintName="FKp56c1712k691lhsyewcssf40f" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="roles"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-4">
        <addForeignKeyConstraint baseColumnNames="phone_type_id" baseTableName="rejected_account_requests" constraintName="FKsyvx3y1g8709a9cx3qunhf989" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="phone_types"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-5">
        <dropForeignKeyConstraint baseTableName="users_shipto_accounts" constraintName="fk_account_id_shipto"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-6">
        <dropForeignKeyConstraint baseTableName="account_requests" constraintName="fk_account_requests_account_id"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-7">
        <dropForeignKeyConstraint baseTableName="rejected_account_requests" constraintName="fk_account_requests_erp_id"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-8">
        <dropForeignKeyConstraint baseTableName="invited_users" constraintName="fk_bill_to_account"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-9">
        <dropForeignKeyConstraint baseTableName="carts" constraintName="fk_cart_approval_state"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-10">
        <dropForeignKeyConstraint baseTableName="carts" constraintName="fk_cart_approver_id"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-11">
        <dropForeignKeyConstraint baseTableName="orders_pending_approval" constraintName="fk_cart_id"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-12">
        <dropForeignKeyConstraint baseTableName="carts" constraintName="fk_cart_shipto_id"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-13">
        <dropForeignKeyConstraint baseTableName="carts" constraintName="fk_carts_delivery_id"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-14">
        <dropForeignKeyConstraint baseTableName="carts" constraintName="fk_carts_will_call_id"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-15">
        <dropForeignKeyConstraint baseTableName="deliveries" constraintName="fk_delivery_address_id"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-16">
        <dropForeignKeyConstraint baseTableName="deliveries" constraintName="fk_delivery_shipto_id"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-17">
        <dropForeignKeyConstraint baseTableName="invited_users" constraintName="fk_erp"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-18">
        <dropForeignKeyConstraint baseTableName="account_requests" constraintName="fk_erp_id"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-19">
        <dropForeignKeyConstraint baseTableName="erps_accounts" constraintName="fk_erp_id_erp_accounts"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-20">
        <dropForeignKeyConstraint baseTableName="erps_users" constraintName="fk_erp_id_erp_users"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-21">
        <dropForeignKeyConstraint baseTableName="line_items" constraintName="fk_line_item_cart"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-22">
        <dropForeignKeyConstraint baseTableName="list_line_items" constraintName="fk_list_line_item_list"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-23">
        <dropForeignKeyConstraint baseTableName="orders_pending_approval_aud" constraintName="fk_orders_pending_approval_aud_rev"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-24">
        <dropForeignKeyConstraint baseTableName="accounts" constraintName="fk_root_user"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-25">
        <dropForeignKeyConstraint baseTableName="invited_users" constraintName="fk_user"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-26">
        <dropForeignKeyConstraint baseTableName="users_shipto_accounts" constraintName="fk_user_id_shipto"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-27">
        <dropForeignKeyConstraint baseTableName="invited_users" constraintName="fk_user_role"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-28">
        <dropUniqueConstraint constraintName="invited_users_email_key" tableName="invited_users"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-29">
        <dropView viewName="geography_columns"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-30">
        <dropView viewName="geometry_columns"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-31">
        <dropTable tableName="address"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-32">
        <dropTable tableName="approval_flow_states"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-33">
        <dropTable tableName="branches"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-34">
        <dropTable tableName="carts"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-35">
        <dropTable tableName="categories"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-36">
        <dropTable tableName="deliveries"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-37">
        <dropTable tableName="line_items"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-38">
        <dropTable tableName="list_line_items"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-39">
        <dropTable tableName="lists"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-40">
        <dropTable tableName="orders_pending_approval"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-41">
        <dropTable tableName="orders_pending_approval_aud"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-42">
        <dropTable tableName="spatial_ref_sys"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-43">
        <dropTable tableName="will_calls"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-44">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="auth_id" tableName="users"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-45">
        <dropNotNullConstraint columnDataType="timestamp" columnName="created_at" tableName="account_requests"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-46">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="email" tableName="account_requests"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-47">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="email" tableName="invited_users"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-48">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="email" tableName="users"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-49">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="first_name" tableName="account_requests"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-50">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="first_name" tableName="invited_users"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-51">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="first_name" tableName="rejected_account_requests"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-52">
        <dropNotNullConstraint columnDataType="boolean" columnName="has_reviewed" tableName="legacy_users"/>
        <dropDefaultValue columnDataType="boolean" columnName="has_reviewed" tableName="legacy_users"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-53">
        <dropNotNullConstraint columnDataType="boolean" columnName="is_account_owner" tableName="legacy_users"/>
        <dropDefaultValue columnDataType="boolean" columnName="is_account_owner" tableName="legacy_users"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-54">
        <dropNotNullConstraint columnDataType="boolean" columnName="is_billto" tableName="erps_accounts"/>
        <dropDefaultValue columnDataType="boolean" columnName="is_billto" tableName="erps_accounts"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-55">
        <dropNotNullConstraint columnDataType="boolean" columnName="is_completed" tableName="invited_users"/>
        <dropDefaultValue columnDataType="boolean" columnName="is_completed" tableName="invited_users"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-56">
        <dropNotNullConstraint columnDataType="boolean" columnName="is_restricted" tableName="users_billto_accounts"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-57">
        <dropNotNullConstraint columnDataType="boolean" columnName="is_whitelisted" tableName="legacy_users"/>
        <dropDefaultValue columnDataType="boolean" columnName="is_whitelisted" tableName="legacy_users"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-58">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="last_name" tableName="account_requests"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-59">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="last_name" tableName="invited_users"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-60">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="last_name" tableName="rejected_account_requests"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-61">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="name" tableName="permissions"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-62">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="name" tableName="roles"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-63">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="phone_number" tableName="account_requests"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-64">
        <dropNotNullConstraint columnDataType="varchar(255)" columnName="phone_number" tableName="rejected_account_requests"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-65">
        <dropNotNullConstraint columnDataType="timestamp" columnName="pp_accepted_at" tableName="users"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-66">
        <dropNotNullConstraint columnDataType="timestamp" columnName="tos_accepted_at" tableName="users"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-67">
        <dropNotNullConstraint columnDataType="uuid" columnName="user_id" tableName="erps_users"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-68">
        <dropNotNullConstraint columnDataType="uuid" columnName="user_role_id" tableName="invited_users"/>
    </changeSet>
    <changeSet author="timothywaite (generated)" id="1632174486867-69">
        <dropPrimaryKey tableName="users_billto_accounts"/>
        <addPrimaryKey columnNames="user_id, account_id" tableName="users_billto_accounts"/>
    </changeSet>
</databaseChangeLog>
