databaseChangeLog:
  - changeSet:
      author: mishrasum
      id: 1649365853637-12
      changes:
        - createTable:
            schemaName: special_pricing
            tableName: users
            columns:
              - column:
                  - constraints:
                      nullable: 'false'
                      primaryKey: 'true'
                      primaryKeyName: pk_users
                    name: id
                    type: varchar(40)
              - column:
                  - constraints:
                      nullable: 'false'
                    name: username
                    type: varchar(50)

  - changeSet:
      author: mishrasum
      id: 1649365853637-13
      changes:
        createTable:
          schemaName: special_pricing
          tableName: user_branch
          columns:
            - column:
                - constraints:
                    nullable: 'false'
                  name: branchId
                  type: varchar(10)
            - column:
                - constraints:
                    referencedTableSchemaName: special_pricing
                    referencedTableName: users
                    referencedColumnNames: id
                    nullable: 'false'
                    foreignKeyName: fk_user_branch_userId
                    validateForeignKey: 'true'
                  name: userId
                  type: varchar(40)

  - changeSet:
      author: mishrasum
      id: 1649365853637-14
      addPrimaryKey:
        schemaName: special_pricing
        columnNames: 'branchId, userId'
        constraintName: pk_user_branch
        tableName: user_branch
        validate: 'true'

  - changeSet:
      author: DurgaAgrawal
      id: 1649365853637-18
      changes:
        createIndex:
          indexName: user_branch_userId_search_index
          schemaName: special_pricing
          tableName: user_branch
          columns:
            column:
              computed: 'true'
              name: to_tsvector('english'::regconfig, 'userId')
