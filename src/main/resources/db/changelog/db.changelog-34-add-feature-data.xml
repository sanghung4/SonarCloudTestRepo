<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
        logicalFilePath="classpath:changelog-34.xml"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
    <changeSet author="elliot.rotwein@dialexa.com" id="addFeatureData">
        <preConditions onFail="MARK_RAN" onFailMessage="feature data already added">
            <sqlCheck expectedResult="0">select count(*) from features where name = 'LISTS'</sqlCheck>
        </preConditions>
        <insert tableName="features">
            <column name="name" value="LISTS" />
            <column name="is_active" value="t" />
        </insert>
        <insert tableName="features">
            <column name="name" value="CREATE_JOB_FORM" />
            <column name="is_active" value="t" />
        </insert>
        <rollback>
            <delete tableName="features">
                <where>name='LISTS'</where>
            </delete>
            <delete tableName="features">
                <where>name='CREATE_JOB_FORM'</where>
            </delete>
        </rollback>
    </changeSet>
    <changeSet  author="elliot.rotwein@dialexa.com" id="updateFeaturesColumnName">
        <renameColumn  columnDataType="Boolean"
                       newColumnName="is_enabled"
                       oldColumnName="is_active"
                       tableName="features"/>
    </changeSet>
    <changeSet author="elliot.rotwein@dialexa.com" id="v34-add-feature-data">
        <tagDatabase tag="v34"/>
    </changeSet>
</databaseChangeLog>
